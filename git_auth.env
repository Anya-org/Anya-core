# GitHub authentication token
# GitHub authentication token
# This will be automatically filled by the setup script

GITHUB_TOKEN=

# Function to check and fill GitHub token
def set_github_token():
    import os
    from dotenv import load_dotenv, set_key

    # Load existing environment variables
    load_dotenv()

    # Check if GITHUB_TOKEN is already set
    if os.getenv('GITHUB_TOKEN'):
        return

    # Check common locations for GitHub token
    token_locations = [
        os.path.expanduser('~/.github/token'),
        os.path.expanduser('~/.gitconfig'),
        os.path.expanduser('~/.git-credentials')
    ]

    for location in token_locations:
        if os.path.exists(location):
            with open(location, 'r') as file:
                content = file.read()
                if 'ghp_' in content:
                    token = content.split('ghp_')[1].split()[0]
                    set_key('.env', 'GITHUB_TOKEN', f'ghp_{token}')
                    print("GitHub token found and set.")
                    return

    # If no token found, prompt user
    token = input("Please enter your GitHub token: ")
    set_key('.env', 'GITHUB_TOKEN', token)
    print("GitHub token set successfully.")

# Call this function during the installation process
# set_github_token()